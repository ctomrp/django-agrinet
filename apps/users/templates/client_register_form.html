{% extends 'base_template.html' %}
{% load static %}
{% block title %}Formulario de Registro{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'styles/panel.css'%}">
    <link rel="stylesheet" href="{% static 'styles/register_form.css'%}">
{% endblock %}

{% block main %}

    {% if request.user.is_authenticated %}
    <div class="bg-dark d-flex flex-column">
    <p class="fs-3 text-light text-center mt-5">
        Ya hay una sesión iniciada. Cierra la sesión para volver a ingresar. <br class="mt-5 mb-5">
    </p>
    </div>
    {% else %}
    <div class="registerFrameBackground justify-content-center">
        <div class="row">
            <div class="col-md-6">
                <div class="presentationMessage">
                    <img src="{% static 'assets/logo3.png' %}" alt="icono_agrinet" width="600px">
                    <div></div><h4 style="color: white">Sé parte de la red N°1 de pequeños agricultores y productores de Chile</h4>
                </div>
            </div>
            <div class="col-md-6 registerFormBackground">
                <h1 class="registerFormTitle"><b>Formulario de Registro</b></h1>
                <form method="POST" class="w-75 container justify-content-center validate-form">
                    {% csrf_token %}
                    <div class="rowGrid">
                        <div class="form-group">
                            {{form.first_name.label_tag}}
                            {{form.first_name}}
                            <p id="id_fn_alert" style="font-size: 12px;"></p>
                        </div>
                        <div class="form-group">
                            {{form.last_name.label_tag}}
                            {{form.last_name}}
                            <p id="id_ln_alert" style="font-size: 12px;"></p>
                        </div>
                        <div class="form-group">
                            {{form.dni.label_tag}}
                            {{form.dni}}
                            <p id="id_dni_alert" style="font-size: 12px;"></p>
                        </div>
                        <div class="form-group">
                            {{form.phone_number.label_tag}}
                            {{form.phone_number}}
                            <p id="id_phone_alert" style="font-size: 12px;"></p>
                        </div>
                        <div class="form-group">
                            {{form.address.label_tag}}
                            {{form.address}}
                            <p id="id_address_alert" style="font-size: 12px;"></p>
                        </div>
                        <div class="form-group">
                            {{form.email.label_tag}}
                            {{form.email}}
                            <p id="id_email_alert" style="font-size: 12px;"></p>
                        </div>
                        <div class="form-group">
                            {{form.password.label_tag}}
                            {{form.password}}
                            <p id="id_password_alert" style="font-size: 12px;"></p>
                        </div>
                        <div class="form-group">
                            <label for="id_repeat_password">Repetir Contraseña:</label>
                            <input type="password" id="id_repeat_password" name="repeat_password">
                            <p id="id_repeat_password_alert" style="font-size: 12px;"></p>
                        </div>
                    </div>
                    <div class="container-fluid d-flex justify-content-center">
                        {% if user_already_exists %}
                            <div class="alert alert-danger" style="color: red; font-size: 12px;">
                                El usuario ya está registrado. Por favor, ingrese su RUN. En caso de que su RUN haya sido registrado y no es usted, contactarse con el Administrador.
                            </div>
                        {% endif %}
                    </div>

                    <div class="d-flex w-100 justify-content-evenly mx-auto">
                    <div class="row d-flex flex-row justify-content-center gap-2 mt-5">
                    <a href="{% url 'login'  %}" class="btn btn-secondary w-100 fw-bold rounded-4">Ir al inicio</a> 
                  </div>
                  <div class="d-flex justify-content-center mt-5">
                      <button id="id_register_button" type="submit" class="btn btn-success w-100 fw-bold rounded-4"><b>Registrarse</b></button>
                    </div>
                </div>


                </form>
            </div>
        </div>
    </div>
    {% endif %}

{% endblock %}

{% block extra_js %} 
    <script type="module" src="{% static 'script/client_register_form.mjs' %}"></script>
{% endblock %}